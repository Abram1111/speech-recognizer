<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tutorial &gt; Audio Recorder</title>
        <link rel="canonical" href="https://markjivko.com/tutorials/B3wWIsNHPk4/">
        <meta charset="UTF-8">
        <link rel="icon" type="image/ico" href="https://markjivko.com/favicon.ico">
        <link rel="stylesheet" href="../static/assets/css/style.css"/>
   
    <title> Recognizer</title>

    <script type="text/javascript" src="https://code.jquery.com/jquery.min.js"></script>
        <script src="https://markjivko.com/dist/recorder.js"></script>
        <script>
            jQuery(document).ready(function () {
                var $ = jQuery;
                var myRecorder = {
                    objects: {
                        context: null,
                        stream: null,
                        recorder: null
                    },
                    init: function () {
                        if (null === myRecorder.objects.context) {
                            myRecorder.objects.context = new (
                                    window.AudioContext || window.webkitAudioContext
                                    );
                        }
                    },
                    start: function () {
                        var options = {audio: true, video: false};
                        navigator.mediaDevices.getUserMedia(options).then(function (stream) {
                            myRecorder.objects.stream = stream;
                            myRecorder.objects.recorder = new Recorder(
                                    myRecorder.objects.context.createMediaStreamSource(stream),
                                    {numChannels: 1}
                            );
                            myRecorder.objects.recorder.record();
                        }).catch(function (err) {});
                    },
                    stop: function (listObject) {
                        if (null !== myRecorder.objects.stream) {
                            myRecorder.objects.stream.getAudioTracks()[0].stop();
                        }
                        if (null !== myRecorder.objects.recorder) {
                            myRecorder.objects.recorder.stop();

                            // Validate object
                            if (null !== listObject
                                    && 'object' === typeof listObject
                                    && listObject.length > 0) {
                                // Export the WAV file
                                myRecorder.objects.recorder.exportWAV(function (blob) {
                                    var data = new FormData()
                                    var url = (window.URL || window.webkitURL)
                                            .createObjectURL(blob);

                                    // Prepare the playback
                                    var audioObject = $('<audio controls></audio>')
                                            .attr('src', url);
                                            
                                    // Wrap everything in a row
                                    var holderObject = $('<div class="row"></div>')
                                            .append(audioObject)
                                           
                                    // Append to the list
                                    listObject.append(holderObject);
                                });
                            }
                        }
                    }
                };

                // Prepare the recordings list
                var listObject = $('[data-role="recordings"]');

                // Prepare the record button
                $('[data-role="controls"] > button').click(function () {
                    // Initialize the recorder
                    myRecorder.init();

                    // Get the button state 
                    var buttonState = !!$(this).attr('data-recording');

                    // Toggle
                    if (!buttonState) {
                        $(this).attr('data-recording', 'true');
                        myRecorder.start();
                    } else {
                        $(this).attr('data-recording', '');
                        myRecorder.stop(listObject);
                    }
                });
            });
        </script>
    
</head>


<body>
    <header class="con1">
        
            <div id="speechRecognition">
                    <div id="result1">
                        <h1>password </h1>
                        {% if speech != "" %}
                        <p id="speechText">{{ speech }}</p>
                        {% endif %}
                    </div>
                    <div id="result2">
                        <h1>speaker </h1>
                        {% if speaker != "" %}
                        <p id="speechstate">{{ speaker }}</p>
                        {% endif %}
                    </div>
                    <div class="spectro">
                        <h1>Data representation</h1>
                
                        <img style="height:500px " src="{{img}}">  
                        <!-- <img src="static\assets\images\result.jpeg" alt="results" width="400" height="400"> -->


                   </div>
                        
    </header>
    <form method="post" action="/">
        <div class="holder">
            <div data-role="controls">
                <button>
                    <ion-icon name="mic-outline"></ion-icon>
                </button>
            </div>
            <div data-role="recordings">
                
            </div>

        </div>          
    </form>
    <div class="fet">
        <h1> Features</h1>
    </div>
    
   
       
<script>
    
</script>

    <!-- </div> -->
    <!-- <div class="holder">
        <div data-role="controls">
            <button>Record</button>
        </div>
        <div data-role="recordings"></div>
    </div> -->

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>
</html>
